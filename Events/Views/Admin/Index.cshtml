@model IEnumerable<Events.Models.User>

@{
    ViewBag.Title = "Painel Geral";
    Layout = "~/Views/Shared/_EventsLayout.cshtml";
}

@if (Session["IsAdmin"] == null)
{
    Response.Redirect("/");
}

<div class="container-fluid bg-white py-5 mb-3">
    <div class="container">
        <div class="row mb-3">
            <div class="col-lg">
                <h1 class="font-weight-bold">Olá, @Session["Name"]</h1>
                <h4 class="text-muted">O que deseja fazer agora?</h4>
            </div>
        </div>
        <hr />
        <div class="row mb-5">
            <div class="col-lg">
                <a class="btn btn-dark btn-lg" href="#newEvent" data-toggle="modal">
                    <i class="fas fa-calendar-plus mr-2"></i>Novo Evento
                </a>
                <a href="/admin/add" class="btn btn-dark btn-lg">
                    <i class="fas fa-user-plus mr-2"></i>Novo Cadastro
                </a>
                <a class="btn btn-dark btn-lg" href="#">
                    <i class="fas fa-calendar-check mr-2"></i>Gerenciar Eventos
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2 class="font-weight-bold">Cadastros</h2>


                <table class="table table-striped">
                    <tr>
                        <th>Código</th>
                        <th>Nome completo</th>
                        <th>Email</th>
                        <th>Senha</th>
                        <th>Administrador?</th>
                        <th>Funções</th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.ID)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Email)
                            </td>
                            <td>
                                @Html.Raw("\u2022\u2022\u2022\u2022\u2022")
                            </td>
                            <td>
                                @Html.CheckBoxFor(modelItem => item.IsAdmin.Value, new { disabled = "disabled" })
                            </td>
                            <td>
                                <a class="btn btn-primary" href="@Url.Action("Add", "Admin", new { id = item.ID })">
                                    <i class="fas fa-pen-alt mr-2"></i>Editar
                                </a>
                                <a class="btn btn-danger" data-toggle="modal" href="#alertConfirm">
                                    <i class="fas fa-trash-alt mr-2"></i>Excluir
                                </a>

                                <!--alerta de confirmação-->
                                <div id="alertConfirm" class="modal fade" role="dialog" tabindex="-1">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                Aviso!
                                                <button type="button" data-dismiss="modal" class="btn btn-light close">&times;</button>
                                            </div>
                                            <div class="modal-body">
                                                Tem certeza que deseja prosseguir?
                                            </div>
                                            <div class="modal-footer">
                                                <a href="#" data-dismiss="modal" class="btn btn-primary">Cancelar</a>
                                                <a class="btn btn-dark" href="@Url.Action("Delete", "Admin", new { id = item.ID })">
                                                    <i class="fas fa-trash-alt mr-2"></i>Excluir
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        $(function () {
            var successMsg = '@TempData["Success"]'
            if (successMsg != '')
                alertify.success(successMsg);
        });
    </script>
}


