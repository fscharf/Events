@model Events.Models.USUARIO
@using System.Security.Claims;

@{
    ViewBag.Title = Html.DisplayFor(x => x.NOME);

    var userAuth = (ClaimsIdentity)User.Identity;

    if (userAuth.IsAuthenticated &&
      userAuth.Claims.Any(c => c.Type == ClaimTypes.Role
      && (c.Value == "3") || (c.Value == "4") || (c.Value == "5")))
    {
        <div class="row mb-3">
            <div class="col-lg">
                <h4>
                    <a class="text-dark mr-2" href="/admin/users"><i class="fas fa-arrow-left"></i></a>
                    Detalhes do Usuário
                </h4>
                @if (TempData["Error"] != null)
                {
                    <div class="alert alert-danger alert-auto-hide">@TempData["Error"]</div>
                }
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-lg-4">
                
                <form method="post">
                    @Html.HiddenFor(x => x.COD_USUARIO)
                    <div class="form-group">
                        <label>Nome</label>

                        @Html.EditorFor(model => model.NOME, new
                        {
                            htmlAttributes = new
                            {
                            @class = "form-control",
                            minlength = "3",
                            maxlength = "50",
                            required = "required",
                            pattern = @"[A-Za-zÀ-ú ']{4,}"
                            }
                        })
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        @Html.EditorFor(model => model.EMAIL, new
                        {
                            htmlAttributes = new
                            {
                            @class = "form-control",
                            type = "email",
                            minlength = "3",
                            maxlength = "35",
                            required = "required"
                            }
                        })
                    </div>
                    <div class="form-group">
                            <label>Senha</label>
                            @Html.EditorFor(model => model.SENHA, new
                            {
                               htmlAttributes = new
                               {
                               @class = "form-control",
                               type = "password",
                               required = "required"
                               }
                            })
                        </div>
                    <div class="form-group">
                        <label>Celular</label>
                        @Html.EditorFor(model => model.CELULAR, new
                        {
                            htmlAttributes = new
                            {
                            @class = "form-control",
                            type = "text",
                            minlength = "11",
                            maxlength = "11",
                            required = "required",
                            pattern = "[0-9]+"
                            }
                        })
                    </div>
                    <div class="form-group">
                        <label>Perfil</label>
                        @Html.DropDownListFor(model => model.COD_PERFIL, new List<SelectListItem> {
                         new SelectListItem { Text = "Tipo de cadastro", Value = "", Selected = true },
                         new SelectListItem { Text = "Aluno", Value = "1" },
                         new SelectListItem { Text = "Visitante", Value = "2" },
                         new SelectListItem { Text = "Master", Value = "3" },
                         new SelectListItem { Text = "Administrador", Value = "4" },
                         new SelectListItem { Text = "Auxiliar de Eventos", Value = "5" },
                        }, htmlAttributes: new { @class = "custom-select", @required = "required" })
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary"><i class="fas fa-check mr-2"></i>Atualizar</button>
                    </div>
                </form>
            </div>
            <div class="col-lg-4">
                <p class="text-muted">Níveis de acesso:</p>
                <ul class="list-unstyled">
                    <li>1 - Aluno</li>
                    <li>2 - Visitante</li>
                    <li>3 - Master</li>
                    <li>4 - Administrador</li>
                    <li>5 - Auxiliar de Eventos</li>
                </ul>
            </div>
        </div>
    }
    else
    {
        Response.Redirect("/");
    }
}